# 🗺️ OCR API Test Files - Visual Map

## 📍 Where to Start?

```
┌─────────────────────────────────────────────────────────────┐
│            🎯 START HERE                                   │
│     Read: START_HERE_TESTING.md                            │
│     Time: 2 minutes                                        │
└────────────────┬────────────────────────────────────────────┘
                 │
        ┌────────▼────────┐
        │ Follow Sections  │
        │ 1, 2, 3, 4      │
        └────────┬────────┘
                 │
         ┌───────▼──────────┐
         │ Run Tests        │
         │ Pick One:        │
         └───┬──────────────┘
             │
    ┌────────┴──────────┬────────────────┐
    │                   │                 │
    ▼                   ▼                 ▼
 ⚡FAST          🔬DETAILED          📝POWERSHELL
quick_test.py    test_ocr_api.py    test_ocr_curl.ps1
5-10 seconds     30-60 seconds       10 seconds
All pass? ✅     All pass? ✅        All pass? ✅
    │                   │                 │
    └───────────────────┼─────────────────┘
                        │
                 ┌──────▼─────────┐
                 │ Tests passed?  │
                 └──┬─────────┬───┘
                    │ ✅ YES  │ ❌ NO
                    │         │
                    ▼         ▼
              NEXT STEP   DEBUG
            (See below)   (Fix & retry)
```

---

## 🎯 Test Decision Tree

```
Q: First time?
├─ YES → Run quick_test.py (5 min)
│        └─ All pass? → ✅ Great!
│                      └─ Proceed to next
│
└─ NO  → Run test_ocr_api.py (1 min)
         └─ Specific test? → Use test_commands.bat
```

---

## 📚 Documentation Map

```
START_HERE_TESTING.md (Introduction)
    ├─ Stage 1: Setup backend
    ├─ Stage 2: Quick verification
    ├─ Stage 3: Full test
    └─ Stage 4: Individual tests

    ├─ Troubleshooting
    ├─ Common issues
    └─ Next steps

OCR_API_TEST_GUIDE.md (Technical)
    ├─ All endpoint details
    ├─ Request/response format
    ├─ Full workflow example
    └─ Performance metrics

TEST_FILES_REFERENCE.md (Comparison)
    ├─ File comparison table
    ├─ Which file for what?
    ├─ Expected outputs
    └─ Command reference
```

---

## 🐍 Python Tests Map

```
quick_test.py (⭐ Recommended First)
    ├─ Test 1: Health check
    ├─ Test 2: Groq tools
    ├─ Test 3: Invoices
    ├─ Test 4: Simple chat (blocking)
    ├─ Test 5: Streaming chat (NEW!)
    └─ Test 6: Statistics

test_ocr_api.py (Full validation)
    ├─ Test 1: Health check
    ├─ Test 2: Upload image (auto-create)
    ├─ Test 3: Enqueue job
    ├─ Test 4: Poll status (wait 30s)
    ├─ Test 5: Get invoices
    └─ Test 6: Streaming chat

test_streaming.py (Specific)
    ├─ Test: Blocking endpoint
    └─ Test: Streaming endpoint
```

---

## 📋 API Endpoints Coverage

```
Health
├─ quick_test.py       ✅
├─ test_ocr_api.py     ✅
└─ test_ocr_curl.ps1   ✅

Chat (Blocking)
├─ quick_test.py       ✅
├─ test_ocr_api.py     ✅
├─ test_ocr_curl.ps1   ✅
└─ test_commands.bat   ✅

Chat (Streaming) ⭐ NEW
├─ quick_test.py       ✅
├─ test_ocr_api.py     ✅
└─ test_ocr_curl.ps1   ✅

OCR Workflow
├─ test_ocr_api.py     ✅
└─ test_commands.bat   ✅

Database
├─ quick_test.py       ✅
└─ test_ocr_api.py     ✅
```

---

## ⏱️ Time Investment

```
Task                    Time    Cumulative
─────────────────────────────────────────
Read START_HERE         2 min   2 min
Run quick_test.py       10 min  12 min
All tests pass? ✅
│
├─ YES → Done!         12 min total
│
└─ NO  → Debug & retry  +5-10 min
```

---

## 🔧 Troubleshooting Flowchart

```
Tests failing?
    │
    ├─ "ConnectionRefusedError"
    │  └─ Backend not running?
    │     └─ Start: python -m uvicorn main:app --host localhost --port 8000
    │
    ├─ "ModuleNotFoundError"
    │  └─ pip install requests pillow
    │
    ├─ "jq not found"
    │  └─ choco install jq OR remove jq from command
    │
    ├─ "Streaming empty"
    │  └─ Check ChatBot.tsx uses getReader()
    │
    └─ Other?
       └─ Check OCR_API_TEST_GUIDE.md Troubleshooting section
```

---

## 📊 Summary Table

| Metric | Value |
|--------|-------|
| Total test files | 5 |
| Total endpoints tested | 8 |
| Total tests | 6+ per file |
| Fastest test | quick_test.py (5s) |
| Comprehensive test | test_ocr_api.py (60s) |
| Python-free option | test_ocr_curl.ps1 |
| Individual commands | test_commands.bat |
| Documentation pages | 3 |
| New feature: Streaming | ✅ Yes |

---

## 🎓 Skill Levels

**Beginner:**
- Run quick_test.py
- Read START_HERE_TESTING.md

**Intermediate:**
- Run test_ocr_api.py
- Modify tests
- Test custom scenarios

**Advanced:**
- Create custom tests
- Test edge cases
- Performance benchmarking
- Integration testing

---

## ✅ Success Checklist

- [ ] Backend starts without errors
- [ ] quick_test.py all 6 tests pass
- [ ] test_ocr_api.py passes
- [ ] Streaming shows chunks
- [ ] No connection errors
- [ ] Database returns data
- [ ] Groq API responds
- [ ] All endpoints working

---

## 📞 Quick Reference

```
🚀 Start Backend
cd f:\DoAnCN\backend
python -m uvicorn main:app --host localhost --port 8000

🧪 Quick Test (5 min)
python quick_test.py

🔬 Full Test (1 min)
python test_ocr_api.py

📝 PowerShell Test
powershell -ExecutionPolicy Bypass -File test_ocr_curl.ps1

💻 Manual Tests
curl http://localhost:8000/health
```

---

**Created:** Oct 22, 2025
**Version:** 1.0
**Status:** Ready 🚀
