# TÃ­nh nÄƒng Quáº£n lÃ½ vÃ  Xuáº¥t HÃ³a Ä‘Æ¡n

## ğŸ¯ Tá»•ng quan

TÃ­nh nÄƒng má»›i cho phÃ©p ngÆ°á»i dÃ¹ng:
- Xem danh sÃ¡ch hÃ³a Ä‘Æ¡n dáº¡ng **báº£ng tÃ­nh** (spreadsheet view)
- **TÃ¬m kiáº¿m** vÃ  **lá»c** hÃ³a Ä‘Æ¡n
- **Chá»n nhiá»u** hÃ³a Ä‘Æ¡n Ä‘á»ƒ xuáº¥t
- **Xuáº¥t bÃ¡o cÃ¡o** ra file **Excel** hoáº·c **PDF**

## ğŸ“‹ CÃ¡ch sá»­ dá»¥ng

### 1. Truy cáº­p trang Quáº£n lÃ½ HÃ³a Ä‘Æ¡n

CÃ³ 3 cÃ¡ch Ä‘á»ƒ vÃ o trang nÃ y:

#### CÃ¡ch 1: Qua Chat Commands
GÃµ má»™t trong cÃ¡c lá»‡nh sau trong chat:
```
- "xuáº¥t bÃ¡o cÃ¡o"
- "xuáº¥t excel"
- "xuáº¥t pdf"
- "quáº£n lÃ½ hÃ³a Ä‘Æ¡n"
```

#### CÃ¡ch 2: Qua Quick Action Buttons
1. GÃµ "Chatbot cÃ³ thá»ƒ lÃ m gÃ¬?"
2. Nháº¥n nÃºt **"ğŸ“Š Xuáº¥t bÃ¡o cÃ¡o"**

#### CÃ¡ch 3: Tá»« danh sÃ¡ch hÃ³a Ä‘Æ¡n
Khi xem danh sÃ¡ch hÃ³a Ä‘Æ¡n trong chat, cÃ³ thá»ƒ gÃµ "xuáº¥t file" Ä‘á»ƒ chuyá»ƒn sang trang quáº£n lÃ½

---

## ğŸ–¥ï¸ Giao diá»‡n Quáº£n lÃ½ HÃ³a Ä‘Æ¡n

### Header Actions
- **â† Quay láº¡i**: Trá»Ÿ vá» Dashboard
- **ğŸ“Š Xuáº¥t Excel**: Xuáº¥t hÃ³a Ä‘Æ¡n Ä‘Ã£ chá»n ra file CSV (má»Ÿ Ä‘Æ°á»£c báº±ng Excel)
- **ğŸ“„ Xuáº¥t PDF**: Xuáº¥t hÃ³a Ä‘Æ¡n ra PDF (Ä‘ang phÃ¡t triá»ƒn)

### Thanh cÃ´ng cá»¥
1. **ğŸ” TÃ¬m kiáº¿m**: 
   - TÃ¬m theo mÃ£ hÃ³a Ä‘Æ¡n
   - TÃ¬m theo tÃªn ngÆ°á»i mua
   - TÃ¬m theo tÃªn ngÆ°á»i bÃ¡n

2. **ğŸ“ Lá»c loáº¡i**:
   - Táº¥t cáº£ loáº¡i
   - HÃ³a Ä‘Æ¡n Ä‘iá»‡n (âš¡)
   - MoMo (ğŸ’³)
   - ThÃ´ng thÆ°á»ng (ğŸ“„)

3. **âœ… Checkbox**:
   - Chá»n/bá» chá»n táº¥t cáº£
   - Chá»n tá»«ng hÃ³a Ä‘Æ¡n riÃªng láº»

### Báº£ng dá»¯ liá»‡u

| Cá»™t | MÃ´ táº£ |
|-----|-------|
| â˜‘ï¸ | Checkbox Ä‘á»ƒ chá»n hÃ³a Ä‘Æ¡n |
| STT | Sá»‘ thá»© tá»± |
| MÃ£ hÃ³a Ä‘Æ¡n | MÃ£ Ä‘á»‹nh danh duy nháº¥t |
| NgÃ y | NgÃ y phÃ¡t hÃ nh |
| NgÆ°á»i bÃ¡n | TÃªn cÃ´ng ty/cÃ¡ nhÃ¢n bÃ¡n |
| NgÆ°á»i mua | TÃªn khÃ¡ch hÃ ng |
| Sá»‘ tiá»n | Tá»•ng giÃ¡ trá»‹ (VND) |
| Loáº¡i | Icon loáº¡i hÃ³a Ä‘Æ¡n |
| Äá»™ tin cáº­y | % Ä‘á»™ chÃ­nh xÃ¡c OCR |
| Xá»­ lÃ½ lÃºc | Thá»i gian xá»­ lÃ½ |

### Thá»‘ng kÃª dÆ°á»›i báº£ng

4 khá»‘i thá»‘ng kÃª hiá»ƒn thá»‹:
- **Tá»•ng sá»‘ hÃ³a Ä‘Æ¡n**: Sá»‘ lÆ°á»£ng Ä‘ang hiá»ƒn thá»‹
- **Tá»•ng giÃ¡ trá»‹**: Tá»•ng tiá»n cá»§a cÃ¡c hÃ³a Ä‘Æ¡n
- **Äá»™ tin cáº­y TB**: Trung bÃ¬nh Ä‘á»™ tin cáº­y
- **ÄÃ£ chá»n**: Sá»‘ hÃ³a Ä‘Æ¡n Ä‘Æ°á»£c chá»n

---

## ğŸ“Š Xuáº¥t file Excel

### CÃ¡ch xuáº¥t:

1. **Chá»n hÃ³a Ä‘Æ¡n** (tÃ¹y chá»n):
   - Tick checkbox cÃ¡c hÃ³a Ä‘Æ¡n muá»‘n xuáº¥t
   - Hoáº·c bá» qua Ä‘á»ƒ xuáº¥t táº¥t cáº£

2. **Nháº¥n nÃºt "Xuáº¥t Excel"**

3. **File Ä‘Æ°á»£c táº£i xuá»‘ng**:
   - Format: `invoices_YYYY-MM-DD.csv`
   - Encoding: UTF-8 with BOM (má»Ÿ Ä‘Æ°á»£c tiáº¿ng Viá»‡t)
   - Má»Ÿ báº±ng: Excel, Google Sheets, LibreOffice

### Cáº¥u trÃºc file Excel:

```csv
STT,MÃ£ hÃ³a Ä‘Æ¡n,NgÃ y,NgÆ°á»i bÃ¡n,NgÆ°á»i mua,Sá»‘ tiá»n,Loáº¡i,Äá»™ tin cáº­y,Tráº¡ng thÃ¡i,Xá»­ lÃ½ lÃºc
1,PB16010051828,10/11/2025,CÃ´ng ty Äiá»‡n lá»±c,Pham Van Giau,294948,HÃ³a Ä‘Æ¡n Ä‘iá»‡n,75.0%,processed,04/12/2025 18:02:15
2,INV-12345,...
```

### LÆ°u Ã½:
- File CSV cÃ³ thá»ƒ má»Ÿ trá»±c tiáº¿p báº±ng Excel
- Náº¿u tiáº¿ng Viá»‡t bá»‹ lá»—i, chá»n **Data > From Text/CSV** trong Excel vÃ  chá»n encoding UTF-8

---

## ğŸ¨ Giao diá»‡n Features

### MÃ u sáº¯c Äá»™ tin cáº­y:
- ğŸŸ¢ **Xanh lÃ¡** (â‰¥80%): Äá»™ tin cáº­y cao
- ğŸŸ¡ **VÃ ng** (60-79%): Äá»™ tin cáº­y trung bÃ¬nh
- ğŸ”´ **Äá»** (<60%): Äá»™ tin cáº­y tháº¥p, cáº§n kiá»ƒm tra

### Icons Loáº¡i hÃ³a Ä‘Æ¡n:
- âš¡ **Äiá»‡n**: HÃ³a Ä‘Æ¡n thanh toÃ¡n Ä‘iá»‡n
- ğŸ’³ **MoMo**: Thanh toÃ¡n qua MoMo
- ğŸ“„ **ThÃ´ng thÆ°á»ng**: HÃ³a Ä‘Æ¡n chung

### Responsive Design:
- Báº£ng cÃ³ thanh cuá»™n ngang trÃªn mobile
- Tá»‘i Æ°u cho mÃ n hÃ¬nh 1024px+
- Hover effects cho dá»… xem

---

## ğŸ’¾ Database Backend

### Table: `invoices`
Má»—i hÃ³a Ä‘Æ¡n xá»­ lÃ½ sáº½ Ä‘Æ°á»£c lÆ°u vÃ o SQLite database:

```sql
CREATE TABLE invoices (
    id INTEGER PRIMARY KEY,
    invoice_code TEXT,
    date TEXT,
    buyer_name TEXT,
    seller_name TEXT,
    total_amount TEXT,
    total_amount_value REAL,
    invoice_type TEXT,
    confidence REAL,
    processed_at TIMESTAMP,
    -- ... more fields
);
```

### API Endpoint:
```
GET /api/invoices
Authorization: Bearer {token}

Response:
{
    "invoices": [...],
    "total": 10
}
```

---

## ğŸ”§ Technical Details

### Frontend:
- **File**: `frontend/src/pages/InvoiceManagement.tsx`
- **Framework**: React + TypeScript
- **Styling**: Tailwind CSS
- **Icons**: Lucide React
- **Export**: Browser-based CSV generation

### State Management:
```typescript
const [currentView, setCurrentView] = useState<'dashboard' | 'invoices'>('dashboard');
```

### Navigation Flow:
```
Dashboard (Chat) 
    â†’ Command: "xuáº¥t bÃ¡o cÃ¡o"
    â†’ setCurrentView('invoices')
    â†’ InvoiceManagement Component
    â†’ Click "Quay láº¡i"
    â†’ setCurrentView('dashboard')
```

---

## ğŸš€ Future Enhancements

### Planned Features:
1. âœ… **PDF Export** - Xuáº¥t bÃ¡o cÃ¡o PDF vá»›i template Ä‘áº¹p
2. âœ… **Email Reports** - Gá»­i bÃ¡o cÃ¡o qua email
3. âœ… **Advanced Filters** - Lá»c theo khoáº£ng thá»i gian, giÃ¡ trá»‹
4. âœ… **Charts/Analytics** - Biá»ƒu Ä‘á»“ thá»‘ng kÃª chi tiáº¿t
5. âœ… **Bulk Actions** - XÃ³a, cáº­p nháº­t nhiá»u hÃ³a Ä‘Æ¡n cÃ¹ng lÃºc
6. âœ… **Invoice Details Modal** - Xem chi tiáº¿t tá»«ng hÃ³a Ä‘Æ¡n
7. âœ… **Sorting** - Sáº¯p xáº¿p theo cá»™t
8. âœ… **Pagination** - PhÃ¢n trang khi cÃ³ nhiá»u hÃ³a Ä‘Æ¡n

---

## ğŸ“ Notes

- Database file: `backend/invoices.db`
- Backend cáº§n cháº¡y vá»›i Tesseract OCR Ä‘á»ƒ Ä‘á»™ chÃ­nh xÃ¡c cao
- File CSV dÃ¹ng BOM Ä‘á»ƒ Excel tá»± Ä‘á»™ng nháº­n UTF-8
- Responsive design tá»‘i Æ°u cho desktop

---

## ğŸ› Troubleshooting

### 1. KhÃ´ng tháº¥y hÃ³a Ä‘Æ¡n?
- Kiá»ƒm tra Ä‘Ã£ upload vÃ  xá»­ lÃ½ hÃ³a Ä‘Æ¡n chÆ°a
- Kiá»ƒm tra backend Ä‘ang cháº¡y
- Xem console browser cÃ³ lá»—i API khÃ´ng

### 2. File Excel lá»—i font?
- Má»Ÿ Excel â†’ Data â†’ From Text/CSV
- Chá»n file â†’ Origin: UTF-8
- Load data

### 3. Xuáº¥t PDF khÃ´ng hoáº¡t Ä‘á»™ng?
- TÃ­nh nÄƒng Ä‘ang phÃ¡t triá»ƒn
- Táº¡m thá»i xuáº¥t Excel rá»“i chuyá»ƒn sang PDF

---

## ğŸ“ Support

Náº¿u cÃ³ váº¥n Ä‘á», gÃµ trong chat:
```
"hÆ°á»›ng dáº«n xuáº¥t bÃ¡o cÃ¡o"
"hÆ°á»›ng dáº«n sá»­ dá»¥ng"
```

Hoáº·c liÃªn há»‡: user@invoice.com
